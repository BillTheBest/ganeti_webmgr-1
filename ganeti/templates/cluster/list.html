{% extends "base.html" %}

{% block title %}Cluster List{% endblock %}

{% block content %}
<h1>Cluster List</h1>
<div class="add"><a href="{% url cluster-create %}">Add Cluster</a></div>
{% if cluster_list %}
<div id="clusterlist">
    <table>
        <tr>
            <th>Hostname</th>
            <th>Slug</th>
            <th>Nodes</th>
            {% comment %}
            <!-- This should be changed to instance-list at a later date -->
            {% endcomment %}
            <th>VMs</th>
            <th>Tags</th>
            <th></th>
        </tr>
    {% for cluster in cluster_list %}
    {% with cluster.info as info %}
    {% with cluster.nodes as nodes %}
    {% with cluster.instances as vms %}
        <tr>
            <td><a href="{% url cluster-detail cluster.slug %}">{{ cluster.hostname }}</a></td>
            <td>{{ cluster.slug }}</td>
            <td>{{ nodes|length }}</td>
            <td>{{ vms|length }}</td>
            <td>{{ info.tags|join:", "}}</td>
            <td><a href="{% url cluster-edit cluster.slug %}">Edit</a></td>
        </tr>
    {% endwith %}
    {% endwith %}
    {% endwith %}
    {% endfor %}
    </table>
</div>
{% endif %}
{% endblock %}