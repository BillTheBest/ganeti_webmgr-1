{% extends "base.html" %}

{% block title %}Cluster {{ cluster.id }}: {{ cluster.hostname|safe }}{% endblock %}

{% block head %}
    <link href="{{MEDIA_URL}}/css/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <style>
    .ui-widget-header {background:none; border-width:0 0 1px 0; -moz-border-radius:0px;}
    .ui-widget-content {border:0;}
    </style>
    <script src="{{MEDIA_URL}}/js/jquery-ui.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#tabs').tabs({ spinner: false});
        });
    </script>
{% endblock %}

{% block content %}
<h1>Cluster: {{ cluster.hostname }}</h1>

<div id="tabs">
    <ul id="tabs">
        <li><a href="#tab1"><span>Details</span></a></li>
        <li><a href="{% url cluster-users cluster.slug %}"><span>Users</span></a></li>
    </ul>
    <div id="tab1" class="tab_content">
        <div class="ticket" id="ticket_{{ cluster.id }}">
        
        <p><a href="{% url instance-create cluster.slug %}">Add Virtual Machine</a></p>
        <h2>Information</h2>
        {% with cluster.info as info %}
        <ul>
        <li>Architecture: {{ info.architecture.0 }}</li>
        <li>Default hypervisor: {{ info.default_hypervisor }}</li>
        <li>Available hypervisors: {{ info.enabled_hypervisors|join:", " }}</li>
        <li>Master node: {{ info.master }}</li>
        <li>Created: 
          {% if cluster.ctime %}
            {{ cluster.ctime|date }}
          {% else %}
            <em>unknown</em>
          {% endif %}
        <li>Last modified: {{ cluster.mtime|date }}</li>
        {% endwith %}
        
        <h2>Virtual Machines</h2>
        {% include "virtual_machine/vm_table.html" %}
        </div>
    </div>
    <div id="tab2" class="tab_content">
    </div>
</div>
{% endblock %}
