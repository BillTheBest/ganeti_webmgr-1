{% extends "base.html" %}
{% load webmgr_tags %}

{% block title %}Create a new Virtual Machine{% endblock %}

{% block head %}
    <script src="{{MEDIA_URL}}/js/jquery.js"></script>
    <script type="text/javascript" src="{{MEDIA_URL}}/js/jquery.virtual_machine_form.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            virtual_machines();
            owner_change('{% url instance-create-cluster-choices %}');
            cluster_change('{% url instance-create-cluster-options %}',
                           '{% url instance-create-cluster-defaults %}');
        });
    </script>
{% endblock %}

{% block content %}
<div id="virtualmachineform">
    <form method="post">
        <fieldset>
            <h1> New Virtual Machine </h1>
            {% vmfield form.owner %}
            {% vmfield form.cluster %}
            {% vmfield form.hostname %}
            {% vmfield form.iallocator %}
            {% vmfield form.iallocator_hostname.as_hidden %}
            {% vmfield form.disk_template %}
            {% vmfield form.pnode %}
            {% vmfield form.snode %}
            {% vmfield form.os %}
        </fieldset>
        <fieldset>
            <h3>General Parameters</h3>
            {% vmfield form.vcpus %}
            {% vmfield form.ram %}
            {% vmfield form.disk_size %}
            {% vmfield form.disk_type %}
            {% vmfield form.nicmode %}
            {% vmfield form.niclink %}
            {% vmfield form.nictype %}
        </fieldset>
        <fieldset>
            <h3>Hypervisor Parameters</h3>
            {% vmfield form.kernelpath %}
            {% vmfield form.rootpath %}
            {% vmfield form.serialconsole %}
            {% vmfield form.bootorder %}
            {% vmfield form.imagepath %}
        </fieldset>
        <input class="submit" type="submit" value="Create">
    </form>
</div>
{% endblock %}
