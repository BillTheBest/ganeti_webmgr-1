{% extends "base.html" %}

{% block title %}Create a new Virtual Machine{% endblock %}

{% block head %}
    <script src="{{MEDIA_URL}}/js/jquery.js"></script>
    <script type="text/javascript" src="{{MEDIA_URL}}/js/jquery.dynamicform.js"></script>
    <script type="text/javascript" src="{{MEDIA_URL}}/js/jquery.virtual_machine_form.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            virtual_machines();
            owner_change('{% url instance-create-cluster-choices %}');
            cluster_change('{% url instance-create-cluster-options %}');
            $("#id_disk").dynamicForm(".add", ".delete", {
                limit:4,
                createColor:"green",
                removeColor:"red"
            });
        });
    </script>
{% endblock %}

{% block content %}
<div id="virtualmachineform">
    <form method="post">
        <fieldset>
            <legend> New Virtual Machine </legend>
                {% for field in form %}
                    {% if field.label = 'Kernel Path' %}
                        <fieldset>
                            <h3>Hypervisor Parameters</h3>
                    {% endif %}
                    
                    {{ field.errors }}
                    <p>{{ field.label_tag }} {{ field }}</p>
                    
                    {% if field.label = 'CD-ROM Image Path' %}
                        </fieldset>
                        <fieldset>
                            <h3>General Parameters</h3>
                    {% endif %}
                    
                    {% if field.label = 'Disks' %}
                        </fieldset>
                    {% endif %}
                {% endfor %}
                <input class="submit" type="submit" value="Create">
        </fieldset>
    </form>
</div>
{% endblock %}