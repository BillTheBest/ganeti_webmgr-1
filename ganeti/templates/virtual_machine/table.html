{% block head %}

<style>
    td.actions div.delete {
        float:none;
    }
    #content td.actions a, #content td.actions {
        padding:5px 0 0 0;
    }
    #vm-wrapper {
        margin-top: 40px;
    }
</style>

<script type="text/javascript" src="{{MEDIA_URL}}/js/VM_ajaxTable.js"></script>
<script type="text/javascript">

    // -------
    // "main"
    // -------
    $(document).ready(function(){
        {% if cluster %}
            var url = "{% url cluster-virtualmachine-table cluster.slug %}";
        {% else %}
            var url = "{% url virtualmachine-table %}";
        {% endif %}

        {% if tableID %}
            var tableID = '{{tableID}}';
        {% else %} 
            var tableID = 'ajaxTable';
        {% endif %}

        $('#'+tableID).data('ajaxTable', new ajaxTable(url, tableID));
        $('#'+tableID).data('ajaxTable').init();
    });

</script>
{% endblock %}

{% if cluster %}
    <a class="button add" href="{% url instance-create cluster.slug %}">
        Add Virtual Machine
    </a>
{% else %}
    {% if can_create %}
    <a class="button add" href="{% url instance-create %}">
        Add Virtual Machine
    </a>
    {% endif %}
{% endif %}

{% if tableID %}
<div id='{{tableID}}'>
{% else %}
<div id='ajaxTable'>
{% endif %}
    <div id="vm-wrapper">
        {% include "virtual_machine/inner_table.html" %}
    </div>

    <div class='spinner'>
        <br/>
        Loading...
        <br/>
        <br/>
        <img src='{{ MEDIA_URL }}/images/ajax-loader.gif'>
    </div>
</div>

