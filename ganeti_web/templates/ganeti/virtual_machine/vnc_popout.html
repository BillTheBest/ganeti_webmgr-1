<html>
    <head>
        <title>Ganeti Web Manager</title>
        <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}/css/base.css"/>
        <link rel="stylesheet" type="text/css" href="{{STATIC_URL}}/css/content.css"/>
        <style>
            body {background: none; height:400px; padding:3px;}
            #actions {clear:both; margin-bottom:0 !important;}
            #VNC_canvas {width:750px !important;}
            #VNC_canvas.connected {width:inherit !important;}
        </style>
        <script type="text/javascript" src="{{STATIC_URL}}/js/jquery.js"></script>
        <script type="text/javascript"
            src="{{STATIC_URL}}/js/ajax_csrf_protection.js"></script>

    </head>
    <body>
        {% with 1 as popout %}
        {% include "ganeti/virtual_machine/novnc.html" %}
        {% endwith %}
        <script type="text/javascript">
            $(function() {
                function getQueryString() {
                    var result = {}, queryString = location.search.substring(1),
                      re = /([^&=]+)=([^&]*)/g, m;
                    while (m = re.exec(queryString)) {
                    result[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
                    }
                    return result;
                }
                var auto_connect = getQueryString()["auto_connect"];
                if (auto_connect == undefined) auto_connect = false;
                if (auto_connect) {
                    $("#connect").click();
                }
            });

            // confirmation dialogs for delete, start, reinstall   
            $("#actions a.power").live("click", function(event) {
                event.preventDefault();
                if(!$(this).hasClass('disabled')) {
                    if(!confirm('Are you sure you want to '+ this.title + ' this VM?')) {
                        return false;
                    }
                    $.post(this.href, action_response);
                }
            });
        </script>
    </body>
</html>
